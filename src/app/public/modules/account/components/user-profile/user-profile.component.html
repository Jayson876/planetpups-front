<section class="profile-section">
  <div class="page-title">
    <h1>My Account</h1>
  </div>
  <div class="profile-section-inner">
    <div class="main-col-2">
      <div class="profile-form">
        <div class="form-title">
          <h3>Account Information</h3>
          <button (click)="enableForm()">
            <svg
              *ngIf="isDisabled"
              xmlns="http://www.w3.org/2000/svg"
              height="18px"
              viewBox="0 0 24 24"
              width="18px"
              fill="#1a130c"
            >
              <path d="M0 0h24v24H0z" fill="none" />
              <path
                d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
              />
            </svg>
            <svg
              *ngIf="!isDisabled"
              xmlns="http://www.w3.org/2000/svg"
              height="18px"
              viewBox="0 0 24 24"
              width="18px"
              fill="#1a130c"
              class="close-btn"
            >
              <path d="M0 0h24v24H0z" fill="none" />
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>
        <form
          [formGroup]="updateForm"
          (submit)="updateProfile(currentUser?._id)"
        >
          <div class="form-group group-col-2">
            <div>
              <mat-form-field appearance="outline">
                <mat-label>First Name</mat-label>
                <input matInput type="text" formControlName="firstName" />
              </mat-form-field>
              <div
                class="errors"
                *ngIf="
                  (updateForm.controls['firstName'].invalid &&
                    updateForm.controls['firstName'].touched) ||
                  (updateForm.controls['firstName'].invalid && isSubmitted)
                "
              >
                <div
                  *ngIf="updateForm.controls['firstName'].hasError('required')"
                >
                  <small>First Name is required</small>
                </div>
              </div>
            </div>
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Last Name</mat-label>
                <input matInput type="text" formControlName="surname" />
              </mat-form-field>
              <div
                class="errors"
                *ngIf="
                  (updateForm.controls['surname'].invalid &&
                    updateForm.controls['surname'].touched) ||
                  (updateForm.controls['surname'].invalid && isSubmitted)
                "
              >
                <div
                  *ngIf="updateForm.controls['surname'].hasError('required')"
                >
                  <small>Last Name is required</small>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group group-col-3">
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Email</mat-label>
                <input matInput type="text" formControlName="email" />
              </mat-form-field>
              <div
                class="errors"
                *ngIf="
                  (updateForm.controls['email'].invalid &&
                    updateForm.controls['email'].touched) ||
                  (updateForm.controls['email'].invalid && isSubmitted)
                "
              >
                <div *ngIf="updateForm.controls['email'].hasError('required')">
                  <small>Email is required</small>
                </div>
                <div *ngIf="updateForm.controls['email'].hasError('pattern')">
                  <small>Invalid email address</small>
                </div>
              </div>
            </div>
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Cell</mat-label>
                <input matInput type="text" formControlName="cell" />
              </mat-form-field>
              <div
                class="errors"
                *ngIf="
                  (updateForm.controls['cell'].invalid &&
                    updateForm.controls['cell'].touched) ||
                  (updateForm.controls['cell'].invalid && isSubmitted)
                "
              >
                <div *ngIf="updateForm.controls['cell'].hasError('required')">
                  <small>Phone number is required</small>
                </div>
                <div *ngIf="updateForm.controls['cell'].hasError('pattern')">
                  <small>Invalid phone number</small>
                </div>
              </div>
            </div>
            <div>
              <mat-checkbox formControlName="whatsapp">Whatsapp?</mat-checkbox>
            </div>
          </div>
          <div class="form-group control-section">
            <button *ngIf="!isDisabled" mat-raised-button type="submit">
              Update
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
